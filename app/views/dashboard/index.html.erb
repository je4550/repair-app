<div style="font-family: Arial, sans-serif;">
  <!-- Header -->
  <div style="background-color: #f8f9fa; padding: 20px; border-bottom: 1px solid #dee2e6;">
    <div style="max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center;">
      <h1 style="margin: 0; color: #333;">Dashboard</h1>
      <div>
        <span style="color: #666;">Welcome, <%= current_user.first_name %>!</span>
        <%= link_to "Sign Out", destroy_user_session_path, method: :delete, style: "margin-left: 20px; color: #dc3545;" %>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div style="max-width: 1200px; margin: 20px auto; padding: 0 20px;">
    <!-- Quick Stats -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 40px;">
      <div style="background-color: #fff; padding: 20px; border: 1px solid #dee2e6; border-radius: 5px;">
        <h3 style="margin: 0 0 10px 0; color: #666; font-size: 14px;">Total Customers</h3>
        <p style="margin: 0; font-size: 32px; font-weight: bold; color: #333;"><%= ActsAsTenant.with_tenant(current_tenant) { Customer.count } %></p>
      </div>
      
      <div style="background-color: #fff; padding: 20px; border: 1px solid #dee2e6; border-radius: 5px;">
        <h3 style="margin: 0 0 10px 0; color: #666; font-size: 14px;">Active Vehicles</h3>
        <p style="margin: 0; font-size: 32px; font-weight: bold; color: #333;"><%= ActsAsTenant.with_tenant(current_tenant) { Vehicle.count } %></p>
      </div>
      
      <div style="background-color: #fff; padding: 20px; border: 1px solid #dee2e6; border-radius: 5px;">
        <h3 style="margin: 0 0 10px 0; color: #666; font-size: 14px;">Today's Appointments</h3>
        <p style="margin: 0; font-size: 32px; font-weight: bold; color: #333;"><%= ActsAsTenant.with_tenant(current_tenant) { Appointment.scheduled.where(scheduled_at: Date.current.all_day).count } %></p>
      </div>
      
      <div style="background-color: #fff; padding: 20px; border: 1px solid #dee2e6; border-radius: 5px;">
        <h3 style="margin: 0 0 10px 0; color: #666; font-size: 14px;">This Month's Revenue</h3>
        <p style="margin: 0; font-size: 32px; font-weight: bold; color: #28a745;">
          <%= number_to_currency(ActsAsTenant.with_tenant(current_tenant) { 
            Appointment.completed.where(completed_at: Date.current.beginning_of_month..Date.current.end_of_month).sum(:total_price_cents) / 100.0 
          }) %>
        </p>
      </div>
    </div>

    <!-- Recent Activity -->
    <div style="background-color: #fff; padding: 20px; border: 1px solid #dee2e6; border-radius: 5px; margin-bottom: 40px;">
      <h2 style="margin: 0 0 20px 0; font-size: 24px;">Recent Activity</h2>
      
      <% recent_appointments = ActsAsTenant.with_tenant(current_tenant) { Appointment.includes(:customer, :vehicle).order(created_at: :desc).limit(5) } %>
      
      <% if recent_appointments.any? %>
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="border-bottom: 2px solid #dee2e6;">
              <th style="padding: 10px; text-align: left;">Date</th>
              <th style="padding: 10px; text-align: left;">Customer</th>
              <th style="padding: 10px; text-align: left;">Vehicle</th>
              <th style="padding: 10px; text-align: left;">Status</th>
              <th style="padding: 10px; text-align: left;">Total</th>
            </tr>
          </thead>
          <tbody>
            <% recent_appointments.each do |appointment| %>
              <tr style="border-bottom: 1px solid #dee2e6;">
                <td style="padding: 10px;"><%= appointment.scheduled_at.strftime("%m/%d/%Y") %></td>
                <td style="padding: 10px;"><%= appointment.customer.full_name %></td>
                <td style="padding: 10px;"><%= "#{appointment.vehicle.year} #{appointment.vehicle.make} #{appointment.vehicle.model}" %></td>
                <td style="padding: 10px;">
                  <span style="padding: 4px 8px; background-color: <%= appointment_status_color(appointment.status) %>; color: white; border-radius: 3px; font-size: 12px;">
                    <%= appointment.status.humanize %>
                  </span>
                </td>
                <td style="padding: 10px;"><%= number_to_currency(appointment.total_price) %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <p style="color: #666;">No recent appointments</p>
      <% end %>
    </div>

    <!-- Quick Actions -->
    <div style="background-color: #fff; padding: 20px; border: 1px solid #dee2e6; border-radius: 5px;">
      <h2 style="margin: 0 0 20px 0; font-size: 24px;">Quick Actions</h2>
      
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
        <%= link_to "New Customer", new_customer_path, style: "padding: 15px 20px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px; text-align: center; display: block;" %>
        <%= link_to "Schedule Appointment", new_appointment_path, style: "padding: 15px 20px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px; text-align: center; display: block;" %>
        <%= link_to "View All Customers", customers_path, style: "padding: 15px 20px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 5px; text-align: center; display: block;" %>
        <%= link_to "View All Appointments", appointments_path, style: "padding: 15px 20px; background-color: #17a2b8; color: white; text-decoration: none; border-radius: 5px; text-align: center; display: block;" %>
      </div>
    </div>
  </div>
</div>
